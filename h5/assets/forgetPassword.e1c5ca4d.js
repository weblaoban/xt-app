import w from"./header.0e761acb.js";import{_ as C,y as v,z as y,A as k,B as D,C as p,G as I,r as b,o as c,c as m,e as x,d as e,w as l,l as h,g as u,t as _,E as f,u as W,x as T}from"./index.d4dbd848.js";import"./logo.ba36431f.js";const S={name:"register",components:{mainHeader:w},data(){return{showtwoPassword:!1,showPassword:!1,showContact:!1,userName:"",passWord:"",twopassWord:"",phone:"",gender:0,smsCode:"",originTime:30,timeDown:30,timer:null,products:[{name:"\u540D\u79F0"},{name:"\u540D\u79F0"},{name:"\u540D\u79F0"},{name:"\u540D\u79F0"}],contact:{name:"",phone:"",message:""},code:"",captcha:"",time:new Date().getTime(),errInfo:""}},mounted(){this.getCaptcha()},methods:{getCaptcha(){v({time:this.time}).then(o=>{const s=new FileReader,r=this;s.onloadend=function(d){r.captcha=d.target.result},s.readAsDataURL(o.data)})},refershCode(){this.time=new Date().getTime(),this.code="",this.getCaptcha()},checkCaptcha(){if(!this.code){this.errInfo="\u8BF7\u8F93\u5165\u56FE\u5F62\u9A8C\u8BC1\u7801";return}y({time:this.time,code:this.code}).then(({data:o})=>{o.data?(this.sendSms(),this.errInfo=""):(this.errInfo="\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u56FE\u5F62\u9A8C\u8BC1\u7801",this.refershCode())})},sendSms(){debugger;k({mobile:this.phone}).then(o=>{o&&o.data&&o.data.success&&this.timeDownfn()})},timeDownfn(){this.timer=setTimeout(()=>{this.timeDown=this.timeDown-1,this.timeDown<=1?(this.timeDown=this.originTime,this.timer&&clearTimeout(this.timer)):(this.timer&&clearTimeout(this.timer),this.timeDownfn())},1e3)},backLogin(){this.$router.replace("/login")},onRegister(){const{userName:o,passWord:s,gender:r,smsCode:d,phone:t}=this;D({userName:o,passWord:p(s),gender:r,smsCode:d,phone:t}).then(n=>{console.log(n)})},onModify(){const{userName:o,passWord:s,gender:r,smsCode:d,phone:t}=this;I({code:d,passWord:p(s),mobile:t,userMobile:t,time:this.time}).then(n=>{n.data.success?(this.$message.success("\u4FEE\u6539\u6210\u529F\uFF0C\u8BF7\u767B\u5F55"),this.$router.replace("/login")):(this.$message.error(n.data.msg),this.refershCode())})},onMenuClick(o){o.link&&this.$router.push(o.link)}}},a=o=>(W("data-v-267d994a"),o=o(),T(),o),V={class:"index-container loginbg"},M={class:"container"},P={class:"loginContent register"},B={class:"inputItem"},N=a(()=>e("div",{class:"label"},"\u624B\u673A\u53F7",-1)),U={class:"smscodeCon"},L=a(()=>e("div",{class:"label"},"\u56FE\u5F62\u9A8C\u8BC1\u7801",-1)),H={class:"inputItem"},R={class:"sendBtn"},A=["src"],E={class:"smscodeCon"},z=a(()=>e("div",{class:"label"},"\u9A8C\u8BC1\u7801",-1)),F={class:"inputItem"},G={class:"sendBtn"},j={key:1,class:"hasSend send"},q={class:"inputItem"},J=a(()=>e("div",{class:"label"},"\u8BBE\u7F6E\u5BC6\u7801",-1)),K=["type"],O={class:"inputItem"},Q=a(()=>e("div",{class:"label"},"\u518D\u6B21\u8F93\u5165\u5BC6\u7801",-1)),X=["type"],Y={class:"errInfo"},Z={class:"other"},$=a(()=>e("p",null,null,-1));function ee(o,s,r,d,t,n){const g=b("mainHeader");return c(),m("div",V,[x(g,{title:"\u5FD8\u8BB0\u5BC6\u7801"}),e("div",M,[e("div",P,[e("div",B,[N,l(e("input",{autocomplete:"off","onUpdate:modelValue":s[0]||(s[0]=i=>t.phone=i),class:"input",id:"phone",type:"text"},null,512),[[h,t.phone]])]),e("div",U,[L,e("div",H,[l(e("input",{autocomplete:"off","onUpdate:modelValue":s[1]||(s[1]=i=>t.code=i),class:"input",id:"code",type:"text",placeholder:"\u8F93\u5165\u56FE\u5F62\u9A8C\u8BC1\u7801"},null,512),[[h,t.code]])]),e("div",R,[e("img",{src:t.captcha,alt:"",onClick:s[2]||(s[2]=(...i)=>n.refershCode&&n.refershCode(...i))},null,8,A)])]),e("div",E,[z,e("div",F,[l(e("input",{autocomplete:"off","onUpdate:modelValue":s[3]||(s[3]=i=>t.smsCode=i),class:"input",id:"smsCode",type:"text",placeholder:"\u8F93\u5165\u624B\u673A\u9A8C\u8BC1\u7801"},null,512),[[h,t.smsCode]])]),e("div",G,[t.timeDown===t.originTime?(c(),m("div",{key:0,class:"send",onClick:s[4]||(s[4]=(...i)=>n.checkCaptcha&&n.checkCaptcha(...i))}," \u83B7\u53D6\u9A8C\u8BC1\u7801 ")):u("",!0),t.timeDown!==t.originTime?(c(),m("div",j,_(t.timeDown),1)):u("",!0)])]),e("div",q,[J,l(e("input",{"onUpdate:modelValue":s[5]||(s[5]=i=>t.passWord=i),class:"input",id:"passWord",type:t.showPassword?"text":"password",placeholder:""},null,8,K),[[f,t.passWord]])]),e("div",O,[Q,l(e("input",{autocomplete:"off","onUpdate:modelValue":s[6]||(s[6]=i=>t.twopassWord=i),class:"input",id:"twopassWord",type:t.showtwoPassword?"text":"password",placeholder:"\u518D\u6B21\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},null,8,X),[[f,t.twopassWord]])]),e("p",Y,_(t.errInfo),1),e("div",{class:"button",onClick:s[7]||(s[7]=(...i)=>n.onModify&&n.onModify(...i))},"\u786E\u8BA4\u4FEE\u6539"),e("div",Z,[$,e("p",{onClick:s[8]||(s[8]=(...i)=>n.backLogin&&n.backLogin(...i))},"\u8FD4\u56DE\u767B\u5F55")])])])])}var ie=C(S,[["render",ee],["__scopeId","data-v-267d994a"]]);export{ie as default};
