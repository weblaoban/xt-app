import g from"./header.0e761acb.js";import{_ as C,y as v,z as I,A as k,B as y,C as u,G as D,m as W,r as b,o as m,c as p,e as P,d as s,t as l,w as h,l as f,g as w,E as _,u as T,x as N}from"./index.d4dbd848.js";import"./logo.ba36431f.js";const x={name:"register",components:{mainHeader:g},data(){return{showtwoPassword:!1,showPassword:!1,showContact:!1,userName:"",passWord:"",twopassWord:"",gender:0,smsCode:"",originTime:30,timeDown:30,timer:null,contact:{name:"",phone:"",message:""},code:"",captcha:"",time:new Date().getTime(),errInfo:""}},mounted(){this.getCaptcha()},methods:{getCaptcha(){v({time:this.time}).then(t=>{const e=new FileReader,a=this;e.onloadend=function(d){a.captcha=d.target.result},e.readAsDataURL(t.data)})},refershCode(){this.time=new Date().getTime(),this.code="",this.getCaptcha()},checkCaptcha(){if(!this.code){this.errInfo="\u8BF7\u8F93\u5165\u56FE\u5F62\u9A8C\u8BC1\u7801";return}I({time:this.time,code:this.code}).then(({data:t})=>{t.data?(this.sendSms(),this.errInfo=""):(this.errInfo="\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u56FE\u5F62\u9A8C\u8BC1\u7801",this.refershCode())})},sendSms(){debugger;k({mobile:this.phone}).then(t=>{t&&t.data&&t.data.success&&this.timeDownfn()})},timeDownfn(){this.timer=setTimeout(()=>{this.timeDown=this.timeDown-1,this.timeDown<=1?(this.timeDown=this.originTime,this.timer&&clearTimeout(this.timer)):(this.timer&&clearTimeout(this.timer),this.timeDownfn())},1e3)},backLogin(){this.$router.replace("/login")},onRegister(){const{userName:t,passWord:e,gender:a,smsCode:d,phone:o}=this;y({userName:t,passWord:u(e),gender:a,smsCode:d,phone:o}).then(n=>{console.log(n)})},onModify(){const{userName:t,passWord:e,gender:a,smsCode:d,userInfo:{nickName:o},twopassWord:n}=this;if(!n){this.errInfo="\u8BF7\u786E\u8BA4\u5BC6\u7801";return}if(!e||!d){this.errInfo="\u8BF7\u8F93\u5165\u5B8C\u6574\u4FE1\u606F";return}D({code:d,passWord:u(e),mobile:phone,userMobile:phone,time:this.time}).then(c=>{c.data.success?(this.$message.success("\u4FEE\u6539\u6210\u529F"),setTimeout(()=>{this.$store.dispatch("LogOut"),this.backLogin()},2e3)):(this.$message.error(c.data.msg),this.refershCode())})},onMenuClick(t){t.link&&this.$router.push(t.link)},twoPasswordChange(t){this.twopassWord&&this.passWord&&t!==this.passWord?this.errInfo="\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4\uFF0C\u8BF7\u68C0\u67E5":this.errInfo=""}},computed:{...W(["userInfo"])}},r=t=>(T("data-v-63f60904"),t=t(),N(),t),S={class:"index-container loginbg"},M={class:"container"},V={class:"phoneInfo"},B=r(()=>s("p",null,"\u767B\u5F55\u624B\u673A\u53F7",-1)),L={class:"loginContent register"},U={class:"smscodeCon"},H=r(()=>s("div",{class:"label"},"\u56FE\u5F62\u9A8C\u8BC1\u7801",-1)),R={class:"inputItem"},A={class:"sendBtn"},E=["src"],G={class:"smscodeCon"},z=r(()=>s("div",{class:"label"},"\u9A8C\u8BC1\u7801",-1)),F={class:"inputItem"},O={class:"sendBtn"},j={key:1,class:"hasSend send"},q={class:"inputItem"},J=r(()=>s("div",{class:"label"},"\u8BBE\u7F6E\u5BC6\u7801",-1)),K=["type"],Q={class:"inputItem"},X=r(()=>s("div",{class:"label"},"\u518D\u6B21\u8F93\u5165\u5BC6\u7801",-1)),Y=["type"],Z={class:"errInfo"},$={class:"other"},ss=r(()=>s("p",null,null,-1));function es(t,e,a,d,o,n){const c=b("mainHeader");return m(),p("div",S,[P(c,{title:"\u4FEE\u6539\u5BC6\u7801"}),s("div",M,[s("div",V,[s("span",null,l(t.userInfo.nickName.slice(0,3)),1),s("span",null,l(t.userInfo.nickName.slice(3,7)),1),s("span",null,l(t.userInfo.nickName.slice(7,11)),1),B]),s("div",L,[s("div",U,[H,s("div",R,[h(s("input",{autocomplete:"off","onUpdate:modelValue":e[0]||(e[0]=i=>o.code=i),class:"input",id:"code",type:"text",placeholder:"\u8F93\u5165\u56FE\u5F62\u9A8C\u8BC1\u7801"},null,512),[[f,o.code]])]),s("div",A,[s("img",{src:o.captcha,alt:"",onClick:e[1]||(e[1]=(...i)=>n.refershCode&&n.refershCode(...i))},null,8,E)])]),s("div",G,[z,s("div",F,[h(s("input",{autocomplete:"off","onUpdate:modelValue":e[2]||(e[2]=i=>o.smsCode=i),class:"input",id:"smsCode",type:"text",placeholder:"\u8F93\u5165\u624B\u673A\u9A8C\u8BC1\u7801"},null,512),[[f,o.smsCode]])]),s("div",O,[o.timeDown===o.originTime?(m(),p("div",{key:0,class:"send",onClick:e[3]||(e[3]=(...i)=>n.checkCaptcha&&n.checkCaptcha(...i))}," \u83B7\u53D6\u9A8C\u8BC1\u7801 ")):w("",!0),o.timeDown!==o.originTime?(m(),p("div",j,l(o.timeDown),1)):w("",!0)])]),s("div",q,[J,h(s("input",{"onUpdate:modelValue":e[4]||(e[4]=i=>o.passWord=i),class:"input",id:"passWord",onInput:e[5]||(e[5]=(...i)=>n.twoPasswordChange&&n.twoPasswordChange(...i)),type:o.showPassword?"text":"password"},null,40,K),[[_,o.passWord]])]),s("div",Q,[X,h(s("input",{autocomplete:"off","onUpdate:modelValue":e[6]||(e[6]=i=>o.twopassWord=i),onInput:e[7]||(e[7]=(...i)=>n.twoPasswordChange&&n.twoPasswordChange(...i)),class:"input",id:"twopassWord",type:o.showtwoPassword?"text":"password"},null,40,Y),[[_,o.twopassWord]])]),s("p",Z,l(o.errInfo),1),s("div",{class:"button",onClick:e[8]||(e[8]=(...i)=>n.onModify&&n.onModify(...i))},"\u786E\u8BA4\u4FEE\u6539"),s("div",$,[ss,s("p",{onClick:e[9]||(e[9]=(...i)=>n.backLogin&&n.backLogin(...i))},"\u8FD4\u56DE\u767B\u5F55")])])])])}var ns=C(x,[["render",es],["__scopeId","data-v-63f60904"]]);export{ns as default};
