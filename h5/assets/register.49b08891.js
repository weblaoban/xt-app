import C from"./header.0e761acb.js";import{_ as I,y as k,z as y,A as W,B as b,C as D,D as x,r as N,o as p,c as m,e as P,d as e,n as h,w as r,v as _,l as c,k as v,g as w,t as u,E as f,u as T,x as V}from"./index.d4dbd848.js";import"./logo.ba36431f.js";var U="/img/h5/logo.png";const S={name:"register",components:{mainHeader:C},data(){return{active:1,showtwoPassword:!1,showPassword:!1,showContact:!1,userName:"",passWord:"",twopassWord:"",phone:"",gender:0,smsCode:"",originTime:30,timeDown:30,timer:null,code:"",captcha:"",time:new Date().getTime(),errInfo:""}},mounted(){},methods:{getCaptcha(){k({time:this.time}).then(i=>{const s=new FileReader,l=this;s.onloadend=function(a){l.captcha=a.target.result},s.readAsDataURL(i.data)})},refershCode(){this.time=new Date().getTime(),this.code="",this.getCaptcha()},checkCaptcha(){if(!this.code){this.errInfo="\u8BF7\u8F93\u5165\u56FE\u5F62\u9A8C\u8BC1\u7801";return}y({time:this.time,code:this.code}).then(({data:i})=>{i.data?(this.sendSms(),this.errInfo=""):(this.errInfo="\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u56FE\u5F62\u9A8C\u8BC1\u7801",this.refershCode())})},sendSms(){debugger;W({mobile:this.phone}).then(i=>{i&&i.data&&i.data.success&&this.timeDownfn()})},timeDownfn(){this.timer=setTimeout(()=>{this.timeDown=this.timeDown-1,this.timeDown<=1?(this.timeDown=this.originTime,this.timer&&clearTimeout(this.timer)):(this.timer&&clearTimeout(this.timer),this.timeDownfn())},1e3)},setActive(i){this.active=i,i==2&&this.refershCode(),this.errInfo=""},onRegister(){const{userName:i,passWord:s,gender:l,smsCode:a,phone:t,twopassWord:n,code:g}=this;if(!i||!s||!a||!t){this.errInfo="\u8BF7\u8F93\u5165\u5B8C\u6574\u4FE1\u606F";return}if(!n){this.errInfo="\u8BF7\u786E\u8BA4\u5BC6\u7801";return}b({mobile:t,nickName:i,userMobile:t,passWord:D(s),sex:l===0?"M":"F",code:a,t:this.time}).then(o=>{o.data.success?(this.$message.success("\u6CE8\u518C\u6210\u529F\uFF0C\u8BF7\u767B\u5F55"),this.setActive(1)):(this.$message.error(o.data.msg),this.refershCode())})},onMenuClick(i){i.link&&this.$router.push(i.link)},twoPasswordChange(i){this.twopassWord&&this.passWord&&this.twopassWord!==this.passWord?this.errInfo="\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4\uFF0C\u8BF7\u68C0\u67E5":this.errInfo=""},onLogin(){const{userName:i,passWord:s}=this;if(!i){document.getElementById("userName").focus(),this.errInfo="\u8BF7\u8F93\u5165\u5B8C\u6574\u4FE1\u606F";return}if(!s){document.getElementById("passWord").focus(),this.errInfo="\u8BF7\u8F93\u5165\u5B8C\u6574\u4FE1\u606F";return}this.errInfo="",x(),this.$store.dispatch("LoginByUsername",{username:i,password:s}).then(({data:l})=>{l.success?(this.$store.dispatch("GetUserInfo"),history.go(-1)):this.errInfo=l.msg})},onForgetPassword(){this.$router.push("/forgetPassword")}}},d=i=>(T("data-v-e0f793fa"),i=i(),V(),i),B={class:"index-container loginbg"},A=d(()=>e("div",{class:"logo"},[e("img",{src:U,alt:""})],-1)),F={class:"tabs"},L={class:"container"},M={class:"loginContent register"},R={class:"genderCon"},E=d(()=>e("div",{class:"label"},"\u60A8\u7684\u59D3\u540D",-1)),H={class:"inputItem"},z={class:"gender"},G={class:"genderItem"},j=["checked"],q=["checked"],J={class:"inputItem"},K=d(()=>e("div",{class:"label"},"\u624B\u673A\u53F7",-1)),O={class:"smscodeCon"},Q=d(()=>e("div",{class:"label"},"\u56FE\u5F62\u9A8C\u8BC1\u7801",-1)),X={class:"inputItem"},Y={class:"sendBtn"},Z=["src"],$={class:"smscodeCon"},ee=d(()=>e("div",{class:"label"},"\u9A8C\u8BC1\u7801",-1)),se={class:"inputItem"},te={class:"sendBtn"},oe={key:1,class:"hasSend send"},ie={class:"inputItem"},ne=d(()=>e("div",{class:"label"},"\u8BBE\u7F6E\u5BC6\u7801",-1)),re=["type"],de={class:"inputItem"},le=d(()=>e("div",{class:"label"},"\u518D\u6B21\u8F93\u5165\u5BC6\u7801",-1)),ae=["type"],ce={class:"errInfo"},he={class:"loginContent register"},pe={class:"inputItem"},me=d(()=>e("div",{class:"label"},"\u624B\u673A\u53F7",-1)),ue={class:"inputItem"},fe=d(()=>e("div",{class:"label"},"\u767B\u5F55\u5BC6\u7801",-1)),ge=["type"],_e={class:"errInfo"},ve={class:"other"},we=d(()=>e("p",null,null,-1));function Ce(i,s,l,a,t,n){const g=N("mainHeader");return p(),m("div",B,[P(g),A,e("div",F,[e("h4",{class:h({loginTitle:!0,active:t.active==1}),onClick:s[0]||(s[0]=o=>n.setActive(1))},"\u767B\u5F55",2),e("h4",{class:h({loginTitle:!0,active:t.active==2}),onClick:s[1]||(s[1]=o=>n.setActive(2))},"\u6CE8\u518C",2)]),e("div",L,[r(e("div",M,[e("div",R,[E,e("div",H,[r(e("input",{autocomplete:"off","onUpdate:modelValue":s[2]||(s[2]=o=>t.userName=o),class:"input",id:"userName",type:"text",placeholder:"\u8F93\u5165\u60A8\u7684\u59D3\u540D"},null,512),[[c,t.userName]])]),e("div",z,[e("div",G,[e("label",{onClick:s[3]||(s[3]=o=>t.gender=0),class:"radio"},[e("span",{class:h({"radio-inner":!0,active:t.gender===0})},null,2),e("input",{type:"radio",name:"gender",checked:t.gender===0},null,8,j),v(" \u5148\u751F ")]),e("label",{class:"radio",onClick:s[4]||(s[4]=o=>t.gender=1)},[e("span",{class:h({"radio-inner":!0,active:t.gender===1})},null,2),e("input",{type:"radio",name:"gender",checked:t.gender===1},null,8,q),v(" \u5973\u58EB ")])])])]),e("div",J,[K,r(e("input",{autocomplete:"off","onUpdate:modelValue":s[5]||(s[5]=o=>t.phone=o),class:"input",id:"phone",type:"text",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u624B\u673A\u53F7"},null,512),[[c,t.phone]])]),e("div",O,[Q,e("div",X,[r(e("input",{autocomplete:"off","onUpdate:modelValue":s[6]||(s[6]=o=>t.code=o),class:"input",id:"code",type:"text",placeholder:"\u8F93\u5165\u56FE\u5F62\u9A8C\u8BC1\u7801"},null,512),[[c,t.code]])]),e("div",Y,[e("img",{src:t.captcha,alt:"",onClick:s[7]||(s[7]=(...o)=>n.refershCode&&n.refershCode(...o))},null,8,Z)])]),e("div",$,[ee,e("div",se,[r(e("input",{autocomplete:"off","onUpdate:modelValue":s[8]||(s[8]=o=>t.smsCode=o),class:"input",id:"smsCode",type:"text",placeholder:"\u8F93\u5165\u624B\u673A\u9A8C\u8BC1\u7801"},null,512),[[c,t.smsCode]])]),e("div",te,[t.timeDown===t.originTime?(p(),m("div",{key:0,class:"send",onClick:s[9]||(s[9]=(...o)=>n.checkCaptcha&&n.checkCaptcha(...o))}," \u83B7\u53D6\u9A8C\u8BC1\u7801 ")):w("",!0),t.timeDown!==t.originTime?(p(),m("div",oe,u(t.timeDown),1)):w("",!0)])]),e("div",ie,[ne,r(e("input",{autocomplete:"off","onUpdate:modelValue":s[10]||(s[10]=o=>t.passWord=o),class:"input",id:"passWord",placeholder:"\u8F93\u5165\u60A8\u7684\u767B\u5F55\u5BC6\u7801",onInput:s[11]||(s[11]=(...o)=>n.twoPasswordChange&&n.twoPasswordChange(...o)),type:t.showPassword?"text":"password"},null,40,re),[[f,t.passWord]])]),e("div",de,[le,r(e("input",{autocomplete:"off","onUpdate:modelValue":s[12]||(s[12]=o=>t.twopassWord=o),class:"input",id:"twopassWord",placeholder:"\u518D\u6B21\u8F93\u5165\u767B\u5F55\u5BC6\u7801",onInput:s[13]||(s[13]=(...o)=>n.twoPasswordChange&&n.twoPasswordChange(...o)),type:t.showtwoPassword?"text":"password"},null,40,ae),[[f,t.twopassWord]])]),e("p",ce,u(t.errInfo),1),e("div",{class:"button",onClick:s[14]||(s[14]=(...o)=>n.onRegister&&n.onRegister(...o))},"\u7ACB\u5373\u6CE8\u518C")],512),[[_,t.active===2]]),r(e("div",he,[e("div",pe,[me,r(e("input",{autocomplete:"off","onUpdate:modelValue":s[15]||(s[15]=o=>t.userName=o),class:"input",id:"phone",type:"text",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u624B\u673A\u53F7"},null,512),[[c,t.userName]])]),e("div",ue,[fe,r(e("input",{autocomplete:"off","onUpdate:modelValue":s[16]||(s[16]=o=>t.passWord=o),class:"input",id:"passWord",placeholder:"\u8F93\u5165\u60A8\u7684\u767B\u5F55\u5BC6\u7801",type:t.showPassword?"text":"password"},null,8,ge),[[f,t.passWord]])]),e("p",_e,u(t.errInfo),1),e("div",{class:"button",onClick:s[17]||(s[17]=(...o)=>n.onLogin&&n.onLogin(...o))},"\u7ACB\u5373\u767B\u5F55"),e("div",ve,[we,e("p",{onClick:s[18]||(s[18]=(...o)=>n.onForgetPassword&&n.onForgetPassword(...o))},"\u5FD8\u8BB0\u5BC6\u7801")])],512),[[_,t.active===1]])])])}var We=I(S,[["render",Ce],["__scopeId","data-v-e0f793fa"]]);export{We as default};
